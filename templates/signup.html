{% extends 'layout.html' %}
{% block title %}Sign Up{% endblock %}
{% block content %}

<div class="container">
    <div class="auth-card mx-auto mt-4" style="max-width:900px;">
        <div class="row g-3">
            <div class="col-12">
                <h2 class="auth-title text-center">Create Your Account</h2>
            </div>

            <div class="col-12">
                <form method="POST" action="/signup" class="row g-3" id="signupForm">
                    <div class="col-md-6">
                        <label class="form-label small">Full Name</label>
                        <input type="text" name="full_name" required class="form-control form-control-sm">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label small">Email</label>
                        <input type="email" name="email" required class="form-control form-control-sm">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label small">Username</label>
                        <input type="text" name="username" required class="form-control form-control-sm">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label small">Password</label>
                        <input type="password" name="password" required class="form-control form-control-sm">
                    </div>

                    <div class="col-12">
                        <label class="form-label small">Select Role</label>
                        <select name="role" id="roleSelect" required class="form-select form-select-sm">
                            <option value="">-- Select Role --</option>
                            <option value="influencer">Influencer</option>
                            <option value="sponsor">Sponsor</option>
                        </select>
                    </div>

                    <div id="influencerFields" class="d-none row g-3">
                        <div class="col-md-6">
                            <label class="form-label small">Category</label>
                            <select name="influencer_category" id="influencerCategory" class="form-select form-select-sm">
                                <option value="">-- Select Category --</option>
                                <option value="Fashion">Fashion</option>
                                <option value="Beauty">Beauty</option>
                                <option value="Fitness">Fitness</option>
                                <option value="Health">Health</option>
                                <option value="Lifestyle">Lifestyle</option>
                                <option value="Food">Food</option>
                                <option value="Travel">Travel</option>
                                <option value="Tech">Tech</option>
                                <option value="Gaming">Gaming</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small">Niche</label>
                            <select name="niche" id="nicheSelect" class="form-select form-select-sm">
                                <option value="">-- Select Niche --</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small">Social Media Platform</label>
                            <input type="text" name="platform" placeholder="e.g. Instagram" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small">Audience Size</label>
                            <input type="number" name="audience_size" placeholder="e.g. 10000" class="form-control form-control-sm">
                        </div>
                    </div>

                    <div id="sponsorFields" class="d-none row g-3">
                        <div class="col-md-6">
                            <label class="form-label small">Brand Name</label>
                            <input type="text" name="brand_name" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small">Company Type</label>
                            <select name="company_type" class="form-select form-select-sm">
                                <option value="">-- Select Company Type --</option>
                                <option>Fashion</option>
                                <option>Beauty</option>
                                <option>Fitness</option>
                                <option>Food & Beverage</option>
                                <option>Tech</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label class="form-label small">Campaign Goals</label>
                            <textarea name="campaign_goals" class="form-control form-control-sm" rows="4" placeholder="Describe campaign goals..."></textarea>
                        </div>
                    </div>

                    <div class="col-12 text-center mt-2">
                        <button type="submit" class="btn btn-primary px-4">Sign Up</button>
                    </div>
                </form>
                <p class="text-center mt-3">Already have an account? <a href="/login">Login here</a></p>
            </div>
        </div>
    </div>
</div>

<script>
    const roleSelect = document.getElementById('roleSelect');
    const influencerFields = document.getElementById('influencerFields');
    const sponsorFields = document.getElementById('sponsorFields');

    roleSelect.addEventListener('change', function () {
        const role = this.value;
        influencerFields.classList.toggle('d-none', role !== 'influencer');
        sponsorFields.classList.toggle('d-none', role !== 'sponsor');
    });

    const categoryToNiche = {
        "Fashion": ["Streetwear", "Luxury Fashion", "Thrifting"],
        "Beauty": ["Makeup Tutorials", "Skincare Routines", "Product Reviews"],
        "Fitness": ["Workout Routines", "Home Fitness", "Gym Vlogs"],
        "Tech": ["Gadget Reviews", "Coding", "AI & ML"],
        "Gaming": ["Gameplay", "Live Streaming", "Esports"]
    };

    const influencerCategory = document.getElementById("influencerCategory");
    const nicheSelect = document.getElementById("nicheSelect");

    influencerCategory && influencerCategory.addEventListener("change", function () {
        const selectedCategory = this.value;
        const niches = categoryToNiche[selectedCategory] || [];
        nicheSelect.innerHTML = '<option value="">-- Select Niche --</option>';
        niches.forEach(niche => {
            const option = document.createElement("option");
            option.value = niche;
            option.textContent = niche;
            nicheSelect.appendChild(option);
        });
    });
</script>

{% endblock %}
